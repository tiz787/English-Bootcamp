<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Neuro-English Bootcamp Pro v5.0</title>
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ§ </text></svg>"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="pomodoro.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <!-- Pomodoro Modal -->
    <div class="pomodoro-modal-overlay" id="pomodoro-modal">
      <div class="pomodoro-container">
        <div class="pomodoro-header">
          <h2 style="margin: 0">ğŸ… Pomodoro Focus</h2>
          <div style="display: flex; gap: 15px">
            <button
              class="pomodoro-close"
              id="pomo-fullscreen"
              title="Pantalla Completa"
            >
              â›¶
            </button>
            <button class="pomodoro-close" id="pomo-close" title="Cerrar">
              âœ•
            </button>
          </div>
        </div>

        <div class="timer-modes">
          <button class="mode-btn active" data-mode="pomodoro">Pomodoro</button>
          <button class="mode-btn" data-mode="short">Short Break</button>
          <button class="mode-btn" data-mode="long">Long Break</button>
          <button class="mode-btn" data-mode="custom">Custom</button>
        </div>

        <div class="timer-display" id="pomo-display">25:00</div>

        <div class="timer-controls">
          <button class="timer-btn primary" id="pomo-start">
            <span>â–¶ï¸</span> Iniciar
          </button>
          <button
            class="timer-btn primary"
            id="pomo-pause"
            style="display: none"
          >
            <span>â¸ï¸</span> Pausar
          </button>
          <button class="timer-btn" id="pomo-reset">
            <span>ğŸ”„</span> Reiniciar
          </button>
        </div>

        <div class="timer-settings">
          <div class="setting-group">
            <label>Pomodoro (min)</label>
            <input
              type="number"
              id="setting-pomodoro"
              value="25"
              class="setting-input"
            />
          </div>
          <div class="setting-group">
            <label>Short Break (min)</label>
            <input
              type="number"
              id="setting-short"
              value="5"
              class="setting-input"
            />
          </div>
          <div class="setting-group">
            <label>Long Break (min)</label>
            <input
              type="number"
              id="setting-long"
              value="15"
              class="setting-input"
            />
          </div>
        </div>

        <div class="pomodoro-analytics">
          <div class="analytics-header">
            <h3>ğŸ“Š EstadÃ­sticas de Enfoque</h3>
            <div class="filter-group">
              <button class="filter-btn" data-filter="day">DÃ­a</button>
              <button class="filter-btn active" data-filter="week">
                Semana
              </button>
              <button class="filter-btn" data-filter="month">Mes</button>
            </div>
          </div>
          <div class="chart-container">
            <canvas id="pomodoroChart"></canvas>
          </div>
        </div>
      </div>
    </div>

    <!-- Barra de Herramientas Fija -->
    <div class="toolbar">
      <div class="toolbar-content">
        <div class="stats-grid">
          <div class="stat-item">
            <span class="emoji">ğŸ”¥</span>
            <span class="value" id="streak-display">0</span>
            <span class="label">dÃ­as</span>
          </div>
          <div class="stat-item">
            <span class="emoji">â­</span>
            <span class="value" id="xp-display">0</span>
            <span class="label">XP</span>
          </div>
          <div class="stat-item">
            <span class="emoji">ğŸ“š</span>
            <span class="value" id="stat-days">0/15</span>
            <span class="label">dÃ­as</span>
          </div>
          <div class="stat-item">
            <span class="emoji">ğŸ¯</span>
            <span class="value" id="stat-accuracy">0%</span>
            <span class="label">precisiÃ³n</span>
          </div>
          <div class="stat-item">
            <span class="emoji">ğŸƒ</span>
            <span class="value" id="stat-cards">0</span>
            <span class="label">cards</span>
          </div>
          <div class="stat-item">
            <span class="emoji">â±ï¸</span>
            <span class="value" id="stat-time">0h</span>
            <span class="label">tiempo</span>
          </div>
        </div>

        <div class="pomodoro-widget">
          <span id="pomodoroTime" class="pomodoro-time">25:00</span>
          <button
            class="toolbar-pomodoro-btn"
            onclick="openPomodoroModal()"
            title="Abrir Pomodoro"
          >
            ğŸ… Pomodoro
          </button>
        </div>

        <button id="themeToggle" onclick="toggleTheme()" title="Cambiar tema">
          ğŸŒ™
        </button>
      </div>
    </div>

    <div class="container">
      <!-- Progreso Global -->
      <div class="global-progress">
        <div class="global-progress-header">
          <span class="global-progress-title">ğŸš€ Progreso del Bootcamp</span>
          <span class="global-progress-value" id="progress-label">0%</span>
        </div>
        <div class="global-progress-bar">
          <div
            class="global-progress-fill"
            id="global-progress-bar"
            style="width: 0%"
          ></div>
        </div>
      </div>

      <!-- NavegaciÃ³n por Tabs -->
      <div class="nav-tabs">
        <button class="nav-tab active" onclick="showTab('lessons')">
          ğŸ“– Lecciones
        </button>
        <button class="nav-tab" onclick="showTab('flashcards')">
          ğŸƒ Flashcards
        </button>
        <button class="nav-tab" onclick="showTab('vocabulary')">
          ğŸ“ Vocabulario
        </button>
        <button class="nav-tab" onclick="showTab('practice')">
          ğŸ¤ PrÃ¡ctica
        </button>
      </div>

      <!-- TAB: Flashcards -->
      <div class="tab-content" id="tab-flashcards">
        <h2 style="margin-bottom: 20px">
          ğŸƒ Flashcards Interactivas (50+ tarjetas)
        </h2>
        <p style="color: var(--text-light); margin-bottom: 20px">
          Haz clic en la tarjeta para voltearla. Marca "Lo sÃ©" o "Repetir". Las
          tarjetas marcadas para repetir se mostrarÃ¡n al final.
        </p>

        <!-- Filtro por dÃ­a -->
        <div class="filter-container">
          <label for="flashcard-day-filter" class="filter-label"
            >ğŸ“… Filtrar por dÃ­a:</label
          >
          <select
            id="flashcard-day-filter"
            class="day-filter-select"
            onchange="onFlashcardFilterChange(this.value)"
          >
            <option value="all">ğŸ“š Todos (Acumulado)</option>
          </select>
        </div>

        <div class="flashcard-container">
          <div class="flashcard" id="current-flashcard" onclick="flipCard()">
            <div class="flashcard-face flashcard-front">
              <span class="fc-topic-badge" id="fc-topic"></span>
              <div class="flashcard-word" id="fc-word">Loading...</div>
              <div class="flashcard-pronunciation" id="fc-pronunciation">
                /pronunciation/
              </div>
              <div class="flashcard-hint" id="fc-hint">Cargando...</div>
              <div
                style="
                  display: flex;
                  gap: 10px;
                  margin-top: 15px;
                  justify-content: center;
                "
              >
                <button
                  class="btn-speak"
                  onclick="event.stopPropagation(); speakCard()"
                  style="font-size: 1.5rem"
                >
                  ğŸ”Š
                </button>
                <button
                  class="btn-usage"
                  onclick="event.stopPropagation(); showWordUsage()"
                >
                  ğŸ’¡ Â¿CuÃ¡ndo usar?
                </button>
              </div>
            </div>
            <div class="flashcard-face flashcard-back">
              <div class="flashcard-translation" id="fc-translation">
                TraducciÃ³n
              </div>
              <div class="flashcard-example" id="fc-example">
                "Example sentence"
              </div>
            </div>
          </div>
        </div>

        <div class="flashcard-nav">
          <button class="fc-prev" onclick="prevCard()">â¬…ï¸ Anterior</button>
          <button class="fc-repeat" onclick="markRepeat()">ğŸ” Repetir</button>
          <button class="fc-know" onclick="markKnown()">âœ… Lo sÃ©</button>
          <button class="fc-next" onclick="nextCard()">Siguiente â¡ï¸</button>
        </div>

        <div
          style="text-align: center; margin-top: 15px; color: var(--text-light)"
        >
          Tarjeta <span id="fc-current">1</span> de <span id="fc-total">0</span>
        </div>
      </div>

      <!-- TAB: Vocabulario TÃ©cnico -->
      <div class="tab-content" id="tab-vocabulary">
        <!-- Filtro por dÃ­a -->
        <div class="filter-container" style="margin-bottom: 25px">
          <label for="vocab-day-filter" class="filter-label"
            >ğŸ“… Filtrar por dÃ­a:</label
          >
          <select
            id="vocab-day-filter"
            class="day-filter-select"
            onchange="onVocabFilterChange(this.value)"
          >
            <option value="all">ğŸ“š Todos (Acumulado)</option>
          </select>
          <button
            class="btn-exam"
            onclick="startVocabTest()"
            style="margin-left: 15px"
          >
            ğŸ§ª Test RÃ¡pido
          </button>
        </div>

        <div class="vocab-section">
          <div class="vocab-header">
            <h2>ğŸ“ Vocabulario de ProgramaciÃ³n</h2>
            <span style="color: var(--text-light)"
              >Esencial para entrevistas</span
            >
          </div>
          <div class="vocab-grid" id="vocab-programming">
            <!-- Se llena con JS -->
          </div>
        </div>

        <div class="vocab-section">
          <div class="vocab-header">
            <h2>ğŸ’¼ Vocabulario de Negocios</h2>
            <span style="color: var(--text-light)"
              >Para reuniones y emails</span
            >
          </div>
          <div class="vocab-grid" id="vocab-business">
            <!-- Se llena con JS -->
          </div>
        </div>

        <div class="vocab-section">
          <div class="vocab-header">
            <h2>ğŸ—£ï¸ Frases de ConversaciÃ³n</h2>
            <span style="color: var(--text-light)">Para el dÃ­a a dÃ­a</span>
          </div>
          <div class="vocab-grid" id="vocab-phrases">
            <!-- Se llena con JS -->
          </div>
        </div>
      </div>

      <!-- TAB: PrÃ¡ctica Oral -->
      <div class="tab-content" id="tab-practice">
        <h2 style="margin-bottom: 20px">ğŸ¤ PrÃ¡ctica de PronunciaciÃ³n</h2>

        <div class="pedagogy-box">
          <div class="pedagogy-title">
            ğŸ§  TÃ©cnica: Escucha â†’ Repite â†’ Compara
          </div>
          <p>
            Escucha la frase, grÃ¡bate repitiÃ©ndola, y compara tu audio con el
            original.
          </p>
        </div>

        <div
          style="
            background: var(--card-bg);
            padding: 25px;
            border-radius: 16px;
            margin: 20px 0;
          "
        >
          <h4 style="margin-bottom: 15px">Frase del dÃ­a:</h4>
          <div
            style="
              font-size: 1.4rem;
              font-weight: 600;
              color: var(--primary);
              margin-bottom: 15px;
            "
            id="practice-phrase"
          >
            "I'm working on a new feature for the application."
          </div>
          <button class="btn-action" onclick="speakPracticePhrase()">
            ğŸ”Š Escuchar PronunciaciÃ³n
          </button>
        </div>

        <div
          style="
            background: #fef3c7;
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid var(--accent);
          "
        >
          <h4 style="margin: 0 0 10px 0; color: #b45309">
            ğŸ’¡ Tip de PronunciaciÃ³n
          </h4>
          <p id="pronunciation-tip" style="margin: 0">
            En "working", la 'g' es casi invisible. Suena mÃ¡s como "workin'".
          </p>
        </div>

        <h3 style="margin-top: 30px">ğŸ“‹ Frases para Practicar</h3>

        <!-- Filtro por dÃ­a -->
        <div class="filter-container" style="margin: 15px 0">
          <label for="practice-day-filter" class="filter-label"
            >ğŸ“… Filtrar por dÃ­a:</label
          >
          <select
            id="practice-day-filter"
            class="day-filter-select"
            onchange="onPracticeFilterChange(this.value)"
          >
            <option value="all">ğŸ“š Todos (Acumulado)</option>
          </select>
        </div>

        <div
          id="practice-sentences"
          style="display: grid; gap: 10px; margin-top: 15px"
        >
          <!-- Se llena con JS -->
        </div>
      </div>

      <!-- TAB: Lecciones (contenido original) -->
      <div class="tab-content active" id="tab-lessons">
        <!-- INTRODUCCION PEDAGOGICA -->
        <div
          style="
            background: white;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 40px;
            border-left: 5px solid var(--primary);
          "
        >
          <h3 style="margin-top: 0; color: var(--primary)">
            ğŸ‘¨â€ğŸ« Sistema de Progreso Mejorado:
          </h3>
          <p>
            Esta pÃ¡gina ahora <strong>guarda automÃ¡ticamente</strong> tus
            resultados. Los tests se pueden repetir hasta
            <strong>3 veces</strong> por dÃ­a. Cada semana tiene un
            <strong>examen final</strong> (2 intentos con preguntas diferentes).
          </p>
          <div
            style="
              margin-top: 15px;
              padding: 15px;
              background: #fef3c7;
              border-radius: 8px;
            "
          >
            <strong>ğŸš€ Â¿Quieres saltar semanas?</strong>
            <p style="margin: 5px 0">
              Si ya tienes conocimientos previos, puedes hacer un examen de
              validaciÃ³n para saltar a una semana mÃ¡s avanzada.
            </p>
            <div
              style="
                display: flex;
                gap: 10px;
                flex-wrap: wrap;
                margin-top: 10px;
              "
            >
              <button class="btn-action btn-outline" onclick="startSkipExam(2)">
                Saltar a Semana 2
              </button>
              <button class="btn-action btn-outline" onclick="startSkipExam(3)">
                Saltar a Semana 3
              </button>
              <button class="btn-action btn-outline" onclick="startSkipExam(4)">
                Saltar a Semana 4
              </button>
              <button class="btn-action btn-outline" onclick="startSkipExam(4)">
                Saltar a Semana 4
              </button>
              <button class="btn-action btn-outline" onclick="startSkipExam(5)">
                Saltar a Semana 5
              </button>
              <button class="btn-action btn-outline" onclick="startSkipExam(6)">
                Saltar a Semana 6
              </button>
              <button class="btn-action btn-outline" onclick="startSkipExam(7)">
                Saltar a Semana 7
              </button>
            </div>
          </div>
        </div>

        <!-- CONTENEDOR DE LECCIONES GENERADO DINÃMICAMENTE -->
        <div id="lessons-container"></div>
      </div>

      <!-- Footer -->
      <footer>
        <p>ğŸ§  Neuro-English Bootcamp Pro v5.0 | Designed for Engineers</p>
        <p style="font-size: 0.8rem; margin-top: 5px">
          MÃ©todo: Input Comprensible + Shadowing + Active Recall + Spaced
          Repetition
        </p>
        <button class="btn-reset" onclick="resetProgress()">
          ğŸ”„ Reiniciar todo mi progreso
        </button>
      </footer>
    </div>

    <script src="main.js"></script>
  </body>
</html>
<script src="pomodoro.js"></script>
<script src="study-plan-renderer.js"></script>
